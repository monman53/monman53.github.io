<!doctype html><html lang='ja'><head><meta charset='UTF-8'><meta name='viewport' content='width=device-width, initial-scale=1'><link rel='shortcut icon' type='image/png' href='/images/favicon.png'/><meta name='description' content='Dockerで修士論文用のTeX環境を構築します．'><title>修論用の環境をつくる : monman53</title><link rel='stylesheet' href='/styles/highlight.css'><script src='/scripts/highlight.pack.js'></script><script>hljs.initHighlightingOnLoad();</script><script>MathJax = {tex: {inlineMath: [['$', '$'], ['\\(', '\\)']]}}</script><script id='MathJax-script' async src='/scripts/mathjax/tex-chtml.js'></script><link rel='stylesheet' href='/styles/main.css'><script async src='https://www.googletagmanager.com/gtag/js?id=UA-111264044-1'></script><script src='/scripts/google.js'></script></head><body><header><div class='pad'><p class='bread'><a href='/'>monman53.github.io</a> / <a href='/post/'>post</a> / <a href='/post/2019/'>2019</a> / <a href='/post/2019/docker-thesis.html'>docker-thesis.html</a></p><p style='font-size: small;'>Last Modified : 2019-12-27 01:45:48 +0900</p></div></header><article><div class='pad'><h1>修論用の環境をつくる</h1><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>TeXは個人的に環境構築方法がよくわからないのと，
一般に修論の時期はPCがこわれる可能性があり，「今すぐ他のPCで代替する必要が!」となることが予想されます．</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_原稿">原稿</h2>
<div class="sectionbody">
<div class="paragraph">
<p>原稿はGitで管理し，GitHubのプライベートリポジトリをリモートにします．</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_レンダリング">レンダリング</h2>
<div class="sectionbody">
<div class="paragraph">
<p>レンダリングは，Docker上のTeX環境で行います．</p>
</div>
<div class="paragraph">
<p>まず， <code>Dockerfile</code> を作っていきます．
ベースは <code>ubuntu:18.04</code> にします．</p>
</div>
<div class="listingblock">
<div class="title">Dockerfile</div>
<div class="content">
<pre class="highlight"><code class="language-plaintext" data-lang="plaintext">From ubuntu:18.04</code></pre>
</div>
</div>
<div class="paragraph">
<p>この状態で， <code>docker build -t thesis-tex .</code> を実行します．</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ cat Dockerfile
From ubuntu:18.04
$ docker build -t thesis-tex .
$ docker images
REPOSITORY  TAG     IMAGE ID        CREATED     SIZE
thesis-tex  latest  549b9b86cb8d    7 days ago  64.2MB</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>docker run -it thesis-tex</code> でコンテナを起動し，中のシェルに入れます．</p>
</div>
<div class="sect2">
<h3 id="_texliveのインストール">TeXLiveのインストール</h3>
<div class="paragraph">
<p>必要そうなTeXLiveをパッケージマネージャから入手します．<br>
最新版が欲しい人はTeXLive公式の入手方法を参照して下さい．</p>
</div>
<div class="listingblock">
<div class="title">Dockerfile</div>
<div class="content">
<pre class="highlight"><code class="language-plaintext" data-lang="plaintext">FROM ubuntu:18.04

RUN apt-get update
RUN apt-get upgrade
RUN apt-get install -y texlive-lang-japanese
RUN apt-get install -y texlive-science</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-plaintext" data-lang="plaintext">$ docker build -t thesis-tex .
$ docker run -it thesis-tex
# platex -version
e-pTeX 3.14159265-p3.7.1-161114-2.6 (utf8.euc) (TeX Live 2017/Debian)
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>上手くインストールできました．</p>
</div>
</div>
<div class="sect2">
<h3 id="_tex_のコンパイル"><code>.tex</code> のコンパイル</h3>
<div class="paragraph">
<p>コンテナ上でファイルを生成しても，exitするとそのファイルは消えてしまします．</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-plaintext" data-lang="plaintext">$ docker run -it thesis-tex
# cd ~
# touch hoge.txt
# exit
$ docker run -it thesis-tex
# cd ~
# ls
# exit</code></pre>
</div>
</div>
<div class="paragraph">
<p>そこで，コンテナ上のディレクトリと，外にあるディレクトリを <code>docker run -v</code> オプションで対応させます．</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-plaintext" data-lang="plaintext">$ docker run -v $(pwd):/root -it thesis-tex</code></pre>
</div>
</div>
<div class="paragraph">
<p>これでカレントディレクトリがコンテナ上の <code>/root</code> がつながります．</p>
</div>
</div>
</div>
</div></div></article><footer><div class='pad'><p>Last Modified : 2019-12-27 01:45:48 +0900</p><p><a href='/'>monman53.github.io</a></p><p>This page is generated by <a href='https://github.com/monman53/monsta'>monsta</a>.</p><p><a rel='license' href='http://creativecommons.org/licenses/by/4.0/'><img alt='Creative Commons License' style='border-width:0' src='/images/cc-by.png' height='30px'/></a><br>This work is licensed under a <a rel='license' href='http://creativecommons.org/licenses/by/4.0/'>Creative Commons Attribution 4.0 International License</a>.</p></div></footer></body></html>
